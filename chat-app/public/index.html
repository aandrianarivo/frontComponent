<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Utilisateurs en ligne</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <h3>Utilisateurs en ligne</h3>
  <ul id="userList" class="list-group"></ul>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const user = localStorage.getItem('chatUser');
    if (!user) window.location.href = '/login.html';
    socket.emit('register', user);
    socket.on('onlineUsers', users => {
      const ul = document.getElementById('userList');
      ul.innerHTML = '';
      users.filter(u => u !== user).forEach(u => {
        const li = document.createElement('li');
        li.textContent = u;
        li.className = 'list-group-item list-group-item-action';
        li.onclick = () => window.location.href = `/chat.html`;
        ul.append(li);
      });
    });
  </script>
</body>
</html>